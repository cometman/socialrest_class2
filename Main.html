<html>
<head>
		<link rel="stylesheet" type="text/css" href="assets/style.css">
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
</head>
<header>
		<button id="logoutButton" onclick="logout()">Logout</button>
</header>

<div id="fb-root"></div>

	<script>		  
		var dispName = "test";
		// Facebook Init function
		window.fbAsyncInit = function() {
			FB.init({
			appId      : '523151661050449', // App ID
			status     : true, // check login status
			cookie     : true, // enable cookies to allow the server to access the session
			xfbml      : true  // parse XFBML
			});
		};

		// Load the SDK Asynchronously
		(function(d){
			var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
			if (d.getElementById(id)) {return;}
			js = d.createElement('script'); js.id = id; js.async = true;
			js.src = "//connect.facebook.net/en_US/all.js";
			ref.parentNode.insertBefore(js, ref);
		}(document));

	
		function retrieveFriends() {
			FB.api('/me/friends', function(response){
				if (response && response.data){
				// Handle response
					addFriendsToDiv(response.data);
					console.log(response.data.length);

				} else {
					console.log('Something goes wrong', response);
				}
			});
		}

		function logout() {
				FB.logout(function(response) {

				});
				window.location = "LoginPage.html";
		}

		function addFriendsToDiv(data) {
			for (i=0; i< data.length; i++)
			{
				getFriendNameWithPicture(data[i].id, data[i].name);
				
			}
		}

		function getFriendNameWithPicture(id, name) {
			FB.api('/'+id+'/picture', function(response){
				if (response && response.data){
					var content = document.getElementById("content");
					content.innerHTML = content.innerHTML + "<img src=" + response.data.url + ">";
					content.innerHTML = content.innerHTML + name + " <br/>";					
				} else {
					console.log('Something goes wrong', response);
				}
			});
		}

	</script>

	<button id="friendListButton" onclick="retrieveFriends()">Create a ride</button>
	<div id="content"></div>
</html>